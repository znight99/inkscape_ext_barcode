#
# Copyright (C) 2010 Martin Owens
#
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
#
"""
Base module for rendering barcodes for Inkscape.
"""
ocrfont=[
"M 3.94,2.19 L 5.41,2.19 5.28047,8.24 4.06953,8.24 z M 3.73,10.4 L 5.62,10.4 5.62,12 3.73,12 z ",
"M 2.29,2.95 L 3.88,2.95 3.43,6.49 2.29,6.49 z M 5.67,2.95 L 7.25,2.95 6.8,6.49 5.67,6.49 z ",
"M 4.00375,5.85 L 3.48062,8.21 5.40656,8.21 5.92969,5.85 z M 2.23719,9.19 L 1.57,9.19 1.805,8.21 2.45703,8.21 2.98031,5.85 1.85047,5.85 2.06281,4.87 3.20016,4.87 3.80672,2.19 4.83031,2.19 4.22375,4.87 6.16469,4.87 6.75609,2.19 7.79484,2.19 7.18828,4.87 7.81,4.87 7.61281,5.85 6.97594,5.85 6.44531,8.21 7.55984,8.21 7.3475,9.19 6.21016,9.19 5.57328,12 4.54969,12 5.18656,9.19 3.26078,9.19 2.62391,12 1.60031,12 z ",
"M 4.18,3.89 Q 3.55078,3.94313 3.16039,4.22359 2.77,4.50406 2.77,4.88312 Q 2.77,5.33047 3.09219,5.60711 3.41438,5.88375 4.18,6.09609 z M 5.19,7.80172 L 5.19,10.2048 Q 5.86984,10.0911 6.23992,9.79164 6.61,9.49219 6.61,9.06016 Q 6.61,8.59766 6.25875,8.28688 5.9075,7.97609 5.19,7.80172 z M 1.41,9.16625 L 2.67,9.16625 Q 2.68516,9.63625 3.07594,9.91297 3.46672,10.1897 4.18,10.22 L 4.18,7.43031 3.17172,7.05875 Q 2.35234,6.75578 1.91617,6.2407 1.48,5.72563 1.48,5.05906 Q 1.48,4.11984 2.19289,3.54039 2.90578,2.96094 4.18,2.87 L 4.18,2.2 5.19,2.2 5.19,2.87 Q 6.42484,3.00625 7.01578,3.48305 7.60672,3.95984 7.69,4.88312 L 6.45,4.88312 Q 6.40453,4.45094 6.10469,4.21594 5.80484,3.98094 5.19,3.90516 L 5.19,6.42203 6.06297,6.74797 Q 7.06844,7.11969 7.48422,7.62039 7.9,8.12109 7.9,8.91766 Q 7.9,9.91891 7.18086,10.56 6.46172,11.2011 5.19,11.33 L 5.19,12 4.18,12 4.17234,11.3452 Q 2.79125,11.3072 2.10063,10.772 1.41,10.2367 1.41,9.19656 z ",
"M 6.2525,11.12 Q 6.53125,11.12 6.68562,10.9097 6.84,10.6994 6.84,10.3238 Q 6.84,9.93313 6.68938,9.72656 6.53875,9.52 6.2525,9.52 Q 5.96641,9.52 5.8082,9.72656 5.65,9.93313 5.65,10.3238 Q 5.65,10.7144 5.8082,10.9172 5.96641,11.12 6.2525,11.12 z M 7.73,10.32 Q 7.73,11.063 7.32742,11.5065 6.92484,11.95 6.24875,11.95 Q 5.56516,11.95 5.16258,11.5103 4.76,11.0706 4.76,10.32 Q 4.76,9.57703 5.16641,9.13352 5.57281,8.69 6.24875,8.69 Q 6.91719,8.69 7.32359,9.13352 7.73,9.57703 7.73,10.32 z M 3.12641,4.69 Q 3.40687,4.69 3.55844,4.48719 3.71,4.28437 3.71,3.89375 Q 3.71,3.50313 3.55844,3.29656 3.40687,3.09 3.12641,3.09 Q 2.83078,3.09 2.67539,3.30031 2.52,3.51062 2.52,3.89375 Q 2.52,4.26938 2.67914,4.47969 2.83828,4.69 3.12641,4.69 z M 4.6,3.89 Q 4.6,4.64063 4.20125,5.08031 3.8025,5.52 3.12641,5.52 Q 2.44281,5.52 2.03641,5.08031 1.63,4.64063 1.63,3.89 Q 1.63,3.14703 2.03641,2.70352 2.44281,2.26 3.12641,2.26 Q 3.79484,2.26 4.19742,2.69969 4.6,3.13937 4.6,3.89 z M 1.66047,11.95 L 1.66047,11.2222 7.04625,2.26 7.68438,2.26 7.68438,2.97266 2.34406,11.95 z ",
"M 4.52719,5.43219 Q 5.03031,5.015 5.25516,4.68891 5.48,4.36281 5.48,4.04422 Q 5.48,3.67266 5.17508,3.44133 4.87016,3.21 4.36719,3.21 Q 3.80313,3.21 3.47156,3.53234 3.14,3.85469 3.14,4.40828 Q 3.14,4.72687 3.29242,5.11367 3.44484,5.50047 3.79547,6.03891 z M 3.49828,7.80656 Q 3.14922,8.11781 2.97461,8.50125 2.8,8.88469 2.8,9.33266 Q 2.8,10.0389 3.25289,10.4945 3.70578,10.95 4.42125,10.95 Q 4.71812,10.95 4.99219,10.8627 5.26625,10.7753 5.525,10.5931 z M 6.215,11.5845 Q 5.80547,11.8661 5.31641,12.003 4.82734,12.14 4.24344,12.14 Q 2.96969,12.14 2.18484,11.3545 1.4,10.5691 1.4,9.30172 Q 1.4,8.54281 1.72164,7.93953 2.04328,7.33625 2.76984,6.73672 Q 2.27859,6.01656 2.0443,5.42523 1.81,4.83391 1.81,4.32609 Q 1.81,3.30266 2.49297,2.71133 3.17594,2.12 4.36734,2.12 Q 5.48281,2.12 6.11641,2.59 6.75,3.06 6.75,3.87859 Q 6.75,4.46984 6.42492,5.03078 6.09984,5.59172 5.44953,6.13 L 4.45094,6.93391 6.3725,9.59844 Q 6.52344,9.20359 6.59508,8.78602 6.66672,8.36844 6.66672,7.74578 Q 6.66672,7.73813 6.65828,7.70016 Q 6.65,7.59391 6.65,7.48 L 7.86,7.48 Q 7.86,8.63406 7.69391,9.39719 7.52781,10.1603 7.16531,10.6842 L 8.13,12 6.51141,12 z ",
"M 3.75,2.95 L 5.62,2.95 5.35,7.22 4.02,7.22 z ",
"M 6.94,12.14 L 6.05953,12.14 Q 4.56516,11.0623 3.89758,9.88234 3.23,8.70234 3.23,7.13891 Q 3.23,5.55297 3.89375,4.36906 4.5575,3.18516 6.05953,2.1 L 6.94,2.1 6.94,3.12 Q 5.74828,3.94672 5.19414,4.91391 4.64,5.88109 4.64,7.14016 Q 4.64,8.39937 5.19789,9.36266 5.75578,10.3259 6.94,11.13 z ",
"M 2.4,3.12 L 2.4,2.1 3.28328,2.1 Q 4.78375,3.18516 5.44688,4.36906 6.11,5.55297 6.11,7.13891 Q 6.11,8.70234 5.44313,9.88234 4.77625,11.0623 3.28328,12.14 L 2.4,12.14 2.4,11.13 Q 3.59281,10.3259 4.15141,9.35883 4.71,8.39172 4.71,7.14016 Q 4.71,5.88859 4.15141,4.91766 3.59281,3.94672 2.4,3.12 z ",
"M 3.99,4.15766 L 3.99,3.77 5.38,3.77 5.38,4.15766 Q 5.38,4.27922 5.3382,5.04227 5.29641,5.80531 5.27359,6.29891 Q 5.83516,6.07156 6.45367,5.85172 7.07219,5.63188 7.1025,5.61672 L 7.51984,5.45 7.96,6.76891 7.48187,6.90531 7.45156,6.91297 Q 6.48781,7.20859 5.60766,7.40562 Q 6.13875,8.00437 6.83688,8.91406 L 6.86719,8.95203 7.20875,9.39172 6.12359,10.18 5.79734,9.73281 Q 5.48609,9.30078 5.20891,8.88 4.93172,8.45922 4.67359,8.04234 Q 4.24078,8.72453 3.98648,9.10734 3.73219,9.49016 3.5575,9.73281 L 3.23125,10.18 2.16125,9.39172 2.4875,8.94438 Q 2.76828,8.56531 3.07938,8.18258 3.39047,7.79984 3.74719,7.40562 Q 3.345,7.31469 2.93141,7.20852 2.51781,7.10234 1.88047,6.90531 L 1.41,6.76891 1.835,5.45 2.2675,5.61672 Q 2.29031,5.62437 2.91633,5.85172 3.54234,6.07906 4.10391,6.29891 Q 4.07359,5.70672 4.0318,4.97016 3.99,4.23359 3.99,4.15766 z ",
"M 4.02,7.72 L 1.68,7.72 1.68,6.52 4.02,6.52 4.02,3.68 5.32,3.68 5.32,6.52 7.67,6.52 7.67,7.72 5.32,7.72 5.32,10.56 4.02,10.56 z ",
"M 4.93687,9.61 L 7.19,9.61 7.19,10.7255 3.62,14.33 2.13,14.33 z ",
"M 1.6,6.31 L 7.75,6.31 7.75,7.85 1.6,7.85 z ",
"M 3.25,9.72 L 6.11,9.72 6.11,12 3.25,12 z ",
"M 6.02922,2.1 L 7.41,2.1 3.33594,12.11 1.94,12.11 z ",
"M 4.67625,10.95 Q 5.31422,10.95 5.6257,10.8703 5.93719,10.7906 6.08141,10.6084 Q 6.32453,10.305 6.44227,9.44367 6.56,8.58234 6.56,7.14047 Q 6.56,5.76703 6.45742,4.91711 6.35484,4.06719 6.14219,3.6725 Q 6.02062,3.43734 5.70164,3.33867 5.38266,3.24 4.67625,3.24 Q 3.97734,3.24 3.65836,3.33867 3.33938,3.43734 3.21781,3.6725 Q 3.00516,4.08234 2.90258,4.92844 2.8,5.77453 2.8,7.14047 Q 2.8,8.32437 2.88359,9.14391 2.96719,9.96344 3.14188,10.3581 Q 3.27859,10.6995 3.57102,10.8248 3.86344,10.95 4.67625,10.95 z M 7.96,7.13891 Q 7.96,8.77062 7.74008,9.82547 7.52016,10.8803 7.07266,11.457 Q 6.79969,11.8061 6.2157,11.973 5.63172,12.14 4.67625,12.14 Q 3.71312,12.14 3.14055,11.9692 2.56797,11.7984 2.27219,11.4267 Q 1.83984,10.8803 1.61992,9.79508 1.4,8.70984 1.4,7.13891 Q 1.4,5.56047 1.62375,4.46391 1.8475,3.36734 2.27219,2.82094 Q 2.56797,2.44906 3.14055,2.27453 3.71312,2.1 4.67625,2.1 Q 5.51797,2.1 6.0868,2.24039 6.65562,2.38078 6.94375,2.66156 Q 7.44438,3.13203 7.70219,4.27039 7.96,5.40875 7.96,7.13891 z ",
"M 4.58,3.81578 L 2.22,5.88 2.22,4.15734 4.51984,2.26 6,2.26 6,12 4.58,12 z ",
"M 3.69797,7.28719 L 4.805,6.54344 Q 5.60109,6.00469 5.90055,5.57602 6.2,5.14734 6.2,4.61609 Q 6.2,4.02438 5.73359,3.62219 5.26719,3.22 4.55438,3.22 Q 4.03859,3.22 3.39781,3.48555 2.75703,3.75109 1.9,4.32 L 1.9,2.80375 Q 2.46891,2.44812 3.10992,2.27406 3.75094,2.1 4.49437,2.1 Q 5.95844,2.1 6.80422,2.82047 7.65,3.54094 7.65,4.77703 Q 7.65,5.57328 7.20602,6.21789 6.76203,6.8625 5.75266,7.52234 L 4.85047,8.11437 Q 3.89516,8.74422 3.54258,9.26406 3.19,9.78391 3.19,10.4592 L 3.19,10.74 7.49,10.74 7.49,11.92 1.73,11.92 Q 1.71484,11.8063 1.71102,11.6888 1.70719,11.5712 1.70719,11.3438 Q 1.70719,9.82734 2.15547,8.92883 2.60375,8.03031 3.69797,7.28719 z ",
"M 1.51,10.25 Q 2.15563,10.5975 2.77469,10.7638 3.39375,10.93 4.02406,10.93 Q 5.04188,10.93 5.66094,10.3684 6.28,9.80687 6.28,8.88875 Q 6.28,7.94781 5.61883,7.50391 4.95766,7.06 3.54406,7.06 Q 3.52125,7.06 3.35781,7.07133 3.19438,7.08266 3.05,7.09031 L 3.0425,6.11 5.65688,3.44 1.51,3.44 1.51,2.26 7.35,2.26 7.35,3.59391 4.85125,6.09484 Q 6.18578,6.14797 6.94789,6.91883 7.71,7.68969 7.71,8.97312 Q 7.71,10.4389 6.69688,11.2895 5.68375,12.14 3.93078,12.14 Q 3.38437,12.14 2.77727,12.0182 2.17016,11.8964 1.51,11.6453 z ",
"M 5.28,9.81 L 1.54,9.81 1.54,8.36937 4.44547,2.19 5.83938,2.19 2.81453,8.62 5.28,8.62 5.28,6.56 6.58,6.56 6.58,8.62 7.85,8.62 7.85,9.81 6.58,9.81 6.58,12 5.28,12 z ",
"M 2.28141,2.26 L 7.15,2.26 7.15,3.43 3.49578,3.43 3.39,5.44516 Q 3.50359,5.4375 3.63992,5.43375 3.77625,5.43 4.05656,5.43 Q 5.54875,5.43 6.49937,6.30297 7.45,7.17594 7.45,8.565 Q 7.45,10.2198 6.08586,11.1649 4.72172,12.11 2.31172,12.11 L 1.94,12.11 1.94,10.9048 Q 2.03078,10.9123 2.1368,10.9162 2.24281,10.92 2.45469,10.92 Q 4.16531,10.92 5.10766,10.2819 6.05,9.64375 6.05,8.48906 Q 6.05,7.60797 5.39898,7.09898 4.74797,6.59 3.5975,6.59 Q 3.30984,6.59 2.90484,6.625 2.49984,6.66 1.97,6.73 z ",
"M 4.71422,10.9 Q 5.58016,10.9 6.07008,10.3586 6.56,9.81719 6.56,8.86328 Q 6.56,7.97734 6.05867,7.45867 5.55734,6.94 4.67625,6.94 Q 3.81781,6.94 3.30891,7.47758 2.8,8.01516 2.8,8.90859 Q 2.8,9.81719 3.31656,10.3586 3.83312,10.9 4.71422,10.9 z M 5.31422,2.19 L 7.09,2.19 Q 6.18656,2.97844 5.37422,3.89586 4.56187,4.81328 3.73438,5.98844 Q 4.02266,5.87422 4.32609,5.81711 4.62953,5.76 4.94062,5.76 Q 6.23781,5.76 7.09891,6.64008 7.96,7.52016 7.96,8.84781 Q 7.96,10.2969 7.0575,11.2034 6.155,12.11 4.71406,12.11 Q 3.205,12.11 2.3025,11.1848 1.4,10.2595 1.4,8.71234 Q 1.4,7.24859 2.3482,5.66734 3.29641,4.08609 5.31422,2.19 z ",
"M 2.89,10.7414 Q 2.89,9.24031 3.35555,7.96281 3.82109,6.68531 4.7975,5.52531 L 5.51172,4.66859 Q 5.97531,4.11516 6.11586,3.87633 6.25641,3.6375 6.25641,3.46312 L 6.25641,3.41 1.51,3.41 1.51,2.26 7.89,2.26 7.89,2.70937 Q 7.89,3.80234 6.71984,5.21422 Q 6.58297,5.37359 6.50703,5.46469 L 5.83844,6.26828 Q 5.00266,7.27656 4.61133,8.33805 4.22,9.39953 4.22,10.6656 L 4.22,12 2.89,12 z ",
"M 4.67625,7.26 Q 3.65844,7.73828 3.22922,8.21664 2.8,8.695 2.8,9.34797 Q 2.8,10.092 3.29758,10.521 3.79516,10.95 4.67625,10.95 Q 5.565,10.95 6.0625,10.521 6.56,10.092 6.56,9.34797 Q 6.56,8.70266 6.13086,8.22047 5.70172,7.73828 4.67625,7.26 z M 4.67625,5.89 Q 5.39156,5.59516 5.77578,5.20594 6.16,4.81672 6.16,4.38594 Q 6.16,3.87203 5.77195,3.58102 5.38391,3.29 4.67625,3.29 Q 3.99906,3.29 3.59953,3.58102 3.2,3.87203 3.2,4.35562 Q 3.2,4.82437 3.58047,5.21359 3.96094,5.60281 4.67625,5.89 z M 5.92406,6.55984 Q 7.02906,7.15969 7.49453,7.83531 7.96,8.51094 7.96,9.48281 Q 7.96,10.7506 7.10305,11.4453 6.24609,12.14 4.67625,12.14 Q 3.11391,12.14 2.25695,11.4187 1.4,10.6975 1.4,9.39172 Q 1.4,8.48062 1.8768,7.81633 2.35359,7.15203 3.43594,6.55984 Q 2.64922,6.05984 2.25961,5.49914 1.87,4.93844 1.87,4.30969 Q 1.87,3.30953 2.62844,2.71477 3.38687,2.12 4.67625,2.12 Q 5.96563,2.12 6.72781,2.70336 7.49,3.28672 7.49,4.24906 Q 7.49,4.92328 7.10422,5.49156 6.71844,6.05984 5.92406,6.55984 z ",
"M 4.68625,3.25 Q 3.7975,3.25 3.30375,3.78484 2.81,4.31969 2.81,5.28313 Q 2.81,6.17063 3.31516,6.69031 3.82031,7.21 4.68625,7.21 Q 5.54453,7.21 6.05727,6.66758 6.57,6.12516 6.57,5.22234 Q 6.57,4.33484 6.05344,3.79242 5.53688,3.25 4.68625,3.25 z M 4.14687,12 L 2.3,12 Q 3.39922,10.907 4.2218,9.96203 5.04437,9.01703 5.63563,8.15938 Q 5.355,8.28844 5.05906,8.34922 4.76312,8.41 4.44453,8.41 Q 3.12453,8.41 2.26727,7.53781 1.41,6.66563 1.41,5.30047 Q 1.41,3.85187 2.29734,2.97594 3.18469,2.1 4.65594,2.1 Q 6.19531,2.1 7.08266,2.99898 7.97,3.89797 7.97,5.44547 Q 7.97,6.81109 7.06352,8.37 6.15703,9.92891 4.14687,12 z ",
"M 3.38,5.23 L 5.96,5.23 5.96,7.33 3.38,7.33 z M 3.38,9.92 L 5.96,9.92 5.96,12 3.38,12 z ",
"M 4.12,5.23 L 6.52,5.23 6.52,7.32 4.12,7.32 z M 4.31687,9.88 L 7.1,9.88 3.89,14.17 2.21,14.17 z ",
"M 7.73,11.63 L 1.27,7.29484 1.27,6.84766 7.73,2.52 7.73,4.13438 3.16547,7.06734 7.73,10.0005 z ",
"M 1.69,5.04 L 7.67,5.04 7.67,6.24 1.69,6.24 z M 7.67,7.98 L 7.67,9.17 1.69,9.17 1.69,7.98 z ",
"M 6.19969,7.06734 L 1.62,4.13438 1.62,2.52 8.08,6.84766 8.08,7.29484 1.62,11.63 1.62,10.0005 z ",
"M 4.16,8.04875 Q 4.16,7.79141 4.26242,7.5832 4.36484,7.375 4.62281,7.11766 L 5.26,6.49703 Q 5.64516,6.12625 5.80758,5.80094 5.97,5.47563 5.97,5.10484 Q 5.97,4.58281 5.62555,4.27641 5.28109,3.97 4.68313,3.97 Q 4.00188,3.97 3.63094,4.3293 3.26,4.68859 3.26,5.34672 L 3.26,5.74 1.94,5.74 1.94,5.41469 Q 1.94,4.10484 2.62219,3.45742 3.30437,2.81 4.66875,2.81 Q 5.91188,2.81 6.65094,3.41945 7.39,4.02891 7.39,5.03578 Q 7.39,5.61859 7.16219,6.09555 6.93438,6.5725 6.41047,7.08734 L 5.66922,7.84438 Q 5.55563,7.95797 5.51781,8.03742 5.48,8.11688 5.48,8.28344 L 5.48,8.73 4.16,8.73 z M 3.88,10.35 L 5.76,10.35 5.76,12 3.88,12 z ",
"M 3.44922,7.67 Q 3.04844,7.67 2.84422,8.06898 2.64,8.46797 2.64,9.25844 Q 2.64,10.2236 2.85555,10.6568 3.07109,11.09 3.55516,11.09 Q 4.01641,11.09 4.2282,10.729 4.44,10.368 4.44,9.56234 Q 4.44,8.60484 4.19422,8.13742 3.94844,7.67 3.44922,7.67 z M 4.45516,7.15578 L 4.45516,6.77 5.54,6.77 5.54,10.2692 Q 5.54,10.7023 5.66203,10.8962 5.78406,11.09 6.05844,11.09 Q 6.455,11.09 6.6075,10.6416 6.76,10.1931 6.76,8.63516 L 6.76,7.11031 Q 6.76,5.33609 6.23703,4.59305 5.71406,3.85 4.49391,3.85 Q 3.57672,3.85 3.13336,4.22914 2.69,4.60828 2.69,5.40453 L 2.69,5.45 1.54,5.45 1.54,5.41969 Q 1.54,4.23578 2.34047,3.56789 3.14094,2.9 4.56734,2.9 Q 6.16078,2.9 6.99539,3.92805 7.83,4.95609 7.83,6.92125 L 7.83,8.75688 Q 7.83,10.6536 7.41945,11.3668 7.00891,12.08 6.02813,12.08 Q 5.62516,12.08 5.32859,11.8986 5.03203,11.7172 4.84203,11.3545 Q 4.61484,11.7172 4.26266,11.8986 3.91047,12.08 3.43344,12.08 Q 2.48672,12.08 2.01336,11.3967 1.54,10.7134 1.54,9.36203 Q 1.54,8.02578 1.98672,7.37289 2.43344,6.72 3.34969,6.72 Q 3.70547,6.72 3.9743,6.82703 4.24313,6.93406 4.45516,7.15578 z ",
"M 4.64047,4.06469 L 3.61672,8.18 5.67188,8.18 z M 3.79125,2.89 L 5.60359,2.89 8,12 6.59703,12 5.96,9.38 3.32109,9.38 2.66891,12 1.41,12 z ",
"M 2.89,4.2 L 2.89,6.71 4.45,6.71 Q 5.56875,6.71 6.04437,6.42477 6.52,6.13953 6.52,5.49297 Q 6.52,4.81609 6.0368,4.50805 5.55359,4.2 4.49578,4.2 z M 2.89,7.87 L 2.89,10.74 4.45,10.74 Q 5.61688,10.74 6.14344,10.3955 6.67,10.0509 6.67,9.30125 Q 6.67,8.57422 6.15117,8.22211 5.63234,7.87 4.57188,7.87 z M 1.59,3.02 L 4.7925,3.02 Q 6.25672,3.02 7.05336,3.65383 7.85,4.28766 7.85,5.44922 Q 7.85,6.14 7.57211,6.59164 7.29422,7.04328 6.71563,7.27859 Q 7.37766,7.51328 7.72383,8.03195 8.07,8.55063 8.07,9.31531 Q 8.07,10.0877 7.6868,10.6934 7.30359,11.2991 6.62063,11.6095 Q 6.26391,11.7761 5.83141,11.848 5.39891,11.92 4.55656,11.92 L 4.12406,11.92 1.59,11.92 z ",
"M 7.44,5.04 L 6.09,5.04 Q 6.05203,4.55641 5.77844,4.3032 5.50484,4.05 5.01844,4.05 Q 4.24313,4.05 3.83656,4.9207 3.43,5.79141 3.43,7.43422 Q 3.43,9.16047 3.83273,10.0652 4.23547,10.97 5.01813,10.97 Q 5.51203,10.97 5.80844,10.6993 6.10484,10.4286 6.12,9.97 L 7.47,9.97 Q 7.34109,10.9844 6.71133,11.5672 6.08156,12.15 5.11031,12.15 Q 3.63094,12.15 2.83047,10.9148 2.03,9.67969 2.03,7.37609 Q 2.03,5.29219 2.85328,4.09109 3.67656,2.89 5.08031,2.89 Q 6.07422,2.89 6.70398,3.46539 7.33375,4.04078 7.44,5.04 z ",
"M 3.41,4.19 L 3.41,10.72 Q 4.66094,10.6822 5.43047,9.84883 6.2,9.01547 6.2,7.69734 Q 6.2,6.30359 5.44187,5.34906 4.68375,4.39453 3.41,4.19 z M 2.12,3.02 L 3.11406,3.02 Q 5.02562,3.02 6.32281,4.35047 7.62,5.68094 7.62,7.58375 Q 7.62,9.5775 6.42141,10.7487 5.22281,11.92 3.17469,11.92 L 2.12,11.92 z ",
"M 2.08,3.02 L 7.45,3.02 7.45,4.14 3.37,4.14 3.37,6.66 6.96,6.66 6.96,7.84 3.37,7.84 3.37,10.72 7.59,10.72 7.59,11.92 2.08,11.92 z ",
"M 2.72,3.02 L 7.4,3.02 7.4,4.16 4.01,4.16 4.01,6.67 6.79,6.67 6.79,7.85 4.01,7.85 4.01,12 2.72,12 z ",
"M 4.45,7.17 L 7.7,7.17 7.7,11.6119 Q 6.85063,11.8998 6.25156,12.0249 5.6525,12.15 5.13687,12.15 Q 3.44578,12.15 2.49789,10.9105 1.55,9.67094 1.55,7.43438 Q 1.55,5.27359 2.52062,4.0568 3.49125,2.84 5.18234,2.84 Q 6.19859,2.84 6.86586,3.32836 7.53313,3.81672 7.7,4.68 L 6.35,4.68 Q 6.15313,4.34016 5.86156,4.15508 5.57,3.97 5.21422,3.97 Q 4.09344,3.97 3.52172,4.83805 2.95,5.70609 2.95,7.41953 Q 2.95,9.17078 3.50648,10.0654 4.06297,10.96 5.15313,10.96 Q 5.41812,10.96 5.72859,10.8879 6.03906,10.8158 6.41,10.6641 L 6.41,8.35 4.45,8.35 z ",
"M 1.84,2.95 L 3.13,2.95 3.13,6.74 6.25,6.74 6.25,2.95 7.54,2.95 7.54,12 6.25,12 6.25,7.92 3.13,7.92 3.13,12 1.84,12 z ",
"M 2.39,10.72 L 4.02,10.72 4.02,4.17 2.67,4.17 2.67,3.02 6.68,3.02 6.68,4.17 5.32,4.17 5.32,10.72 6.96,10.72 6.96,11.92 2.39,11.92 z ",
"M 3.31,9.08 L 3.31,9.55766 Q 3.31,10.3536 3.53781,10.6568 3.76563,10.96 4.30484,10.96 Q 4.82875,10.96 5.07937,10.6454 5.33,10.3308 5.33,9.68641 L 5.33,2.95 6.62,2.95 6.62,9.26953 Q 6.62,10.7428 6.06211,11.4414 5.50422,12.14 4.32,12.14 Q 3.16625,12.14 2.59313,11.5058 2.02,10.8716 2.02,9.59547 L 2.02,9.08 z ",
"M 1.54,2.95 L 2.83,2.95 2.83,6.70953 6.49313,2.95 8.23,2.95 3.89938,7.2325 8.54,12 6.72766,12 2.83,7.83875 2.83,12 1.54,12 z ",
"M 2.22,2.95 L 3.51,2.95 3.51,10.72 8.07,10.72 8.07,11.92 2.22,11.92 z ",
"M 1.49,2.95 L 3.58156,2.95 4.68031,6.93578 5.78672,2.95 7.88,2.95 7.88,12 6.59,12 6.59,4.23813 5.18047,9.05 4.12719,9.05 2.71,4.20781 2.71,12 1.49,12 z ",
"M 1.68,2.95 L 3.23594,2.95 6.45,9.70344 6.45,2.95 7.68,2.95 7.68,12 6.18469,12 2.91,5.18594 2.91,12 1.68,12 z ",
"M 4.66625,10.93 Q 5.49219,10.93 5.99609,9.98539 6.5,9.04078 6.5,7.43234 Q 6.5,5.81641 6.00367,4.8832 5.50734,3.95 4.66625,3.95 Q 3.83266,3.95 3.33633,4.87937 2.84,5.80875 2.84,7.43234 Q 2.84,9.04844 3.34016,9.98922 3.84031,10.93 4.66625,10.93 z M 7.9,7.465 Q 7.9,9.53688 6.98633,10.8384 6.07266,12.14 4.67,12.14 Q 3.27484,12.14 2.35742,10.8346 1.44,9.52922 1.44,7.465 Q 1.44,5.39313 2.35742,4.09156 3.27484,2.79 4.67,2.79 Q 6.07266,2.79 6.98633,4.09156 7.9,5.39313 7.9,7.465 z ",
"M 3.16,4.17 L 3.16,7.06 4.615,7.06 Q 5.66828,7.06 6.11914,6.72625 6.57,6.3925 6.57,5.62641 Q 6.57,4.89813 6.11156,4.53406 5.65313,4.17 4.74375,4.17 z M 1.87,3.02 L 4.97109,3.02 Q 6.37969,3.02 7.17484,3.70977 7.97,4.39953 7.97,5.61234 Q 7.97,6.81766 7.20516,7.51883 6.44031,8.22 5.13016,8.22 L 3.16,8.22 3.16,12 1.87,12 z ",
"M 5.23391,10.0097 L 3.42406,7.615 5.05219,7.615 5.93063,8.76688 Q 6.02906,8.42594 6.07453,8.08492 6.12,7.74391 6.12,7.35734 Q 6.12,5.79625 5.65805,4.88312 5.19609,3.97 4.43125,3.97 Q 3.60578,3.97 3.17789,4.79219 2.75,5.61437 2.75,7.19813 Q 2.75,8.63797 3.21953,9.46398 3.68906,10.29 4.49172,10.29 Q 4.71891,10.29 4.89313,10.2218 5.06734,10.1536 5.23391,10.0097 z M 6.86547,10.0097 L 8.42,12 6.77297,12 6.01391,10.9902 Q 5.61203,11.2566 5.24039,11.3783 4.86875,11.5 4.47438,11.5 Q 3.05625,11.5 2.20313,10.3013 1.35,9.1025 1.35,7.07672 Q 1.35,5.11172 2.19234,3.95086 3.03469,2.79 4.44625,2.79 Q 5.81984,2.79 6.68492,4.00719 7.55,5.22438 7.55,7.21125 Q 7.55,8.03031 7.38266,8.70906 7.21531,9.38781 6.86547,10.0097 z ",
"M 3.26,4.17 L 3.26,7.04 4.25375,7.04 Q 5.19688,7.04 5.66844,6.69547 6.14,6.35094 6.14,5.65422 Q 6.14,4.87422 5.68727,4.52211 5.23453,4.17 4.22344,4.17 z M 1.97,3.02 L 4.39797,3.02 Q 5.98031,3.02 6.76016,3.66039 7.54,4.30078 7.54,5.59687 Q 7.54,6.58203 7.06805,7.19211 6.59609,7.80219 5.69,8.00688 L 8.01,12 6.45203,12 4.36,8.22 3.26,8.22 3.26,12 1.97,12 z ",
"M 6.05,5.15 Q 6.01969,4.60297 5.65914,4.29148 5.29859,3.98 4.69141,3.98 Q 4.09172,3.98 3.70086,4.31414 3.31,4.64828 3.31,5.14953 Q 3.31,5.57469 3.64398,5.91266 3.97797,6.25063 4.88109,6.69109 L 5.39719,6.93406 Q 6.56469,7.51078 7.04234,8.12937 7.52,8.74797 7.52,9.62828 Q 7.52,10.7667 6.70859,11.4384 5.89719,12.11 4.52453,12.11 Q 3.25813,12.11 2.5718,11.4423 1.88547,10.7747 1.84,9.5 L 3.24,9.5 3.24,9.54562 Q 3.24,10.2136 3.58391,10.5818 3.92781,10.95 4.54016,10.95 Q 5.23562,10.95 5.67781,10.5704 6.12,10.1908 6.12,9.61391 Q 6.12,9.12047 5.81742,8.78266 5.51484,8.44484 4.31953,7.86781 L 3.68187,7.55656 Q 2.80219,7.13906 2.36609,6.54703 1.93,5.955 1.93,5.18063 Q 1.93,4.12563 2.71898,3.47281 3.50797,2.82 4.79,2.82 Q 5.94313,2.82 6.64484,3.43852 7.34656,4.05703 7.43,5.15 z ",
"M 4.04,4.2 L 1.65,4.2 1.65,3.02 7.73,3.02 7.73,4.2 5.33,4.2 5.33,12 4.04,12 z ",
"M 1.66,2.95 L 2.95,2.95 2.95,8.73984 Q 2.95,9.99781 3.3518,10.4639 3.75359,10.93 4.70875,10.93 Q 5.64891,10.93 6.05445,10.4374 6.46,9.94484 6.46,8.755 L 6.46,2.95 7.7,2.95 7.7,8.95969 Q 7.7,10.5916 6.94219,11.3658 6.18438,12.14 4.59281,12.14 Q 3.78953,12.14 3.15672,11.8555 2.52391,11.5709 2.16016,11.0397 Q 1.88734,10.6527 1.77367,10.1405 1.66,9.62828 1.66,8.36859 z ",
"M 1.27,2.95 L 2.65172,2.95 4.70656,10.7569 6.73672,2.95 8.04,2.95 5.6,12 3.76,12 z ",
"M 1.43,2.95 L 2.76,2.95 Q 2.77531,4.96563 2.89766,6.68961 3.02,8.41359 3.24938,9.92156 L 4.12656,6.47 5.28859,6.47 6.20734,9.92156 Q 6.36672,8.77734 6.46539,7.23523 6.56406,5.69313 6.64,2.95 L 7.87,2.95 Q 7.81672,5.99703 7.59625,8.14961 7.37578,10.3022 6.95,12 L 5.6,12 4.68094,8.70781 3.8,12 2.41,12 Q 1.98453,10.4311 1.74906,8.27469 1.51359,6.11828 1.43,2.95 z ",
"M 3.85703,7.39156 L 1.34,2.95 2.89422,2.95 4.64547,6.16375 6.43469,2.95 7.86,2.95 5.44156,7.31578 8,12 6.465,12 4.63031,8.53609 2.80328,12 1.32,12 z ",
"M 4.03,7.91469 L 1.33,2.95 2.86953,2.95 4.68266,6.42906 6.47125,2.95 7.88,2.95 5.32,7.77813 5.32,12 4.03,12 z ",
"M 1.99,10.8969 L 5.44406,4.19 2.04,4.19 2.04,3.02 6.93,3.02 6.93,4.09687 3.53359,10.74 7.37,10.74 7.37,11.92 1.99,11.92 z ",
"M 2.64,12.14 L 2.64,2.1 7.36,2.1 7.36,3.28 3.93,3.28 3.93,10.96 7.36,10.96 7.36,12.14 z ",
"M 1.93,2.1 L 3.35484,2.1 7.44,12.14 6.03031,12.14 z ",
"M 1.99,10.96 L 5.42,10.96 5.42,3.28 1.99,3.28 1.99,2.1 6.71,2.1 6.71,12.14 1.99,12.14 z ",
"M 4.36656,2.22 L 4.98875,2.22 7.91,6.63828 7.12094,7.29 4.67766,4.71328 2.24187,7.29 1.43,6.63828 z ",
"M -0.06,16.49 L -0.06,15.31 10,15.31 10,16.49 z ",
"M 4.34656,4.31 L 2.77,2.19 4.44516,2.19 5.62,4.31 z ",
"M 6.22,8.83797 Q 6.08328,8.82281 5.86313,8.81516 Q 5.55187,8.8 5.46078,8.8 Q 4.17016,8.8 3.54008,9.1 2.91,9.4 2.91,10.0152 Q 2.91,10.448 3.24406,10.729 3.57813,11.01 4.10953,11.01 Q 4.99766,11.01 5.58984,10.4063 6.18203,9.8025 6.22,8.83797 z M 6.22,11.1309 Q 5.8025,11.6142 5.26344,11.8521 4.72438,12.09 4.07906,12.09 Q 2.99344,12.09 2.33672,11.5062 1.68,10.9223 1.68,9.96687 Q 1.68,8.80672 2.64422,8.26836 3.60844,7.73 5.65813,7.73 Q 5.75688,7.73 5.94289,7.73758 6.12891,7.74516 6.22,7.74516 L 6.22,7.69984 Q 6.22,6.89828 5.81789,6.53914 5.41578,6.18 4.51297,6.18 Q 4.01969,6.18 3.75039,6.30875 3.48109,6.4375 3.39,6.71 L 2.12,6.71 Q 2.21109,5.92141 2.82945,5.5157 3.44781,5.11 4.54031,5.11 Q 6.00469,5.11 6.67234,5.74227 7.34,6.37453 7.34,7.76031 L 7.34,12 6.22,12 z ",
"M 4.87047,11.01 Q 5.76469,11.01 6.25734,10.373 6.75,9.73594 6.75,8.58328 Q 6.75,7.50641 6.24219,6.8732 5.73438,6.24 4.87047,6.24 Q 3.96109,6.24 3.43055,6.87703 2.9,7.51406 2.9,8.62125 Q 2.9,9.72844 3.43055,10.3692 3.96109,11.01 4.87047,11.01 z M 1.75,2.2 L 2.9,2.2 2.9,6.05797 Q 3.33219,5.60281 3.8743,5.37141 4.41641,5.14 5.06094,5.14 Q 6.40297,5.14 7.19148,6.06836 7.98,6.99672 7.98,8.59594 Q 7.98,10.2405 7.20289,11.1802 6.42578,12.12 5.09141,12.12 Q 4.33312,12.12 3.80617,11.8821 3.27922,11.6442 2.83953,11.1006 L 2.83953,12 1.75,12 z ",
"M 7.32,7.09 L 6.06,7.09 Q 6.02203,6.65141 5.74844,6.4207 5.47484,6.19 4.98078,6.19 Q 4.17516,6.19 3.78758,6.75164 3.4,7.31328 3.4,8.47453 Q 3.4,9.74969 3.77305,10.3948 4.14609,11.04 4.89234,11.04 Q 5.43281,11.04 5.73359,10.7475 6.03437,10.455 6.08,9.87 L 7.38,9.87 Q 7.33453,10.9459 6.68195,11.518 6.02937,12.09 4.86094,12.09 Q 3.60891,12.09 2.89945,11.1691 2.19,10.2483 2.19,8.61859 Q 2.19,6.92078 2.92992,6.04539 3.66984,5.17 5.09656,5.17 Q 6.10578,5.17 6.68633,5.67266 7.26687,6.17531 7.32,7.09 z ",
"M 4.47953,6.24 Q 3.62312,6.24 3.11156,6.87703 2.6,7.51406 2.6,8.58328 Q 2.6,9.73594 3.09266,10.373 3.58531,11.01 4.47953,11.01 Q 5.39656,11.01 5.93086,10.3654 6.46516,9.72078 6.46516,8.62125 Q 6.46516,7.52156 5.92703,6.88078 5.38891,6.24 4.47953,6.24 z M 6.45,6.05797 L 6.45,2.2 7.62,2.2 7.62,12 6.51078,12 6.51078,11.1006 Q 6.05578,11.6442 5.53266,11.8821 5.00953,12.12 4.25891,12.12 Q 2.92437,12.12 2.14719,11.1802 1.37,10.2405 1.37,8.59594 Q 1.37,6.99672 2.15852,6.06836 2.94703,5.14 4.28906,5.14 Q 4.93359,5.14 5.4757,5.37141 6.01781,5.60281 6.45,6.05797 z ",
"M 6.41,7.78 Q 6.32672,7.00422 5.89516,6.58211 5.46359,6.16 4.75172,6.16 Q 4.06281,6.16 3.59711,6.58594 3.13141,7.01187 2.98,7.78 z M 5.95,10.53 L 7.34,10.53 Q 7.21875,11.2709 6.575,11.6905 5.93125,12.11 4.91641,12.11 Q 3.40172,12.11 2.54586,11.1841 1.69,10.2581 1.69,8.59609 Q 1.69,6.97938 2.53891,6.04969 3.38781,5.12 4.84297,5.12 Q 6.19969,5.12 6.93484,6.06844 7.67,7.01687 7.67,8.78469 L 7.67,8.83 2.98,8.83 2.98,8.90625 Q 2.98,9.90344 3.49391,10.4667 4.00781,11.03 4.89953,11.03 Q 5.33031,11.03 5.59484,10.905 5.85938,10.78 5.95,10.53 z ",
"M 4.03,6.31 L 2.13,6.31 2.13,5.23 4.01484,5.23 Q 4.00734,5.13125 4.00352,5.02492 3.99969,4.91859 3.99969,4.71359 Q 3.99969,3.36187 4.67461,2.78094 5.34953,2.2 6.91937,2.2 L 7.17,2.2 7.17,3.27 Q 6.00031,3.28516 5.58258,3.61562 5.16484,3.94609 5.16484,4.8425 Q 5.16484,4.8425 5.17242,4.97164 5.18,5.10078 5.18,5.23 L 7.17,5.23 7.17,6.31 5.18,6.31 5.18,12 4.03,12 z ",
"M 4.47422,6.23 Q 3.67797,6.23 3.20398,6.80352 2.73,7.37703 2.73,8.34938 Q 2.73,9.39781 3.18883,9.97891 3.64766,10.56 4.47422,10.56 Q 5.32359,10.56 5.82406,9.97508 6.32453,9.39016 6.32453,8.395 Q 6.32453,7.39219 5.82406,6.81109 5.32359,6.23 4.47422,6.23 z M 6.37,6.06453 L 6.37,5.23 7.53,5.23 7.53,11.3186 Q 7.53,12.977 6.82477,13.6585 6.11953,14.34 4.44359,14.34 Q 3.24531,14.34 2.57039,13.893 1.89547,13.4459 1.85,12.62 L 3.13,12.62 Q 3.17547,12.9752 3.47898,13.1226 3.7825,13.27 4.53375,13.27 Q 5.57328,13.27 5.97164,12.8843 6.37,12.4986 6.37,11.3489 L 6.37,10.7269 Q 5.99844,11.1972 5.48289,11.4286 4.96734,11.66 4.31531,11.66 Q 3.05672,11.66 2.28336,10.7609 1.51,9.86172 1.51,8.38219 Q 1.51,6.91031 2.27953,6.03016 3.04906,5.15 4.33047,5.15 Q 4.99016,5.15 5.5057,5.38055 6.02125,5.61109 6.37,6.06453 z ",
"M 6.12,7.80531 Q 6.12,7.01641 5.83508,6.6182 5.55016,6.22 4.98031,6.22 Q 4.04578,6.22 3.62789,6.97852 3.21,7.73703 3.21,9.51203 L 3.21,12 2.06,12 2.06,2.2 3.21,2.2 3.21,5.95437 Q 3.60516,5.56734 4.09141,5.35867 4.57766,5.15 5.06391,5.15 Q 6.15031,5.15 6.72016,5.79484 7.29,6.43969 7.29,7.68391 L 7.29,12 6.12,12 z ",
"M 4.81,6.43 L 2.72,6.43 2.72,5.32 6.04,5.32 6.04,12 4.81,12 z M 4.36,2.2 L 6.07,2.2 6.07,3.73 4.36,3.73 z ",
"M 4.68,2.2 L 6.35,2.2 6.35,3.73 4.68,3.73 z M 3.43,6.39 L 3.43,5.3 6.27,5.3 6.27,11.5516 Q 6.27,12.9187 5.74188,13.5644 5.21375,14.21 4.09672,14.21 L 2.67,14.21 2.67,13.1 3.64219,13.1 Q 4.50141,13.1 4.8207,12.7091 5.14,12.3181 5.14,11.21 L 5.14,6.39 z ",
"M 2,2.2 L 3.17,2.2 3.17,7.7925 3.26109,7.7925 5.93094,5.23 7.63,5.23 4.30016,8.19422 7.92,12 6.25828,12 3.26109,8.70969 3.17,8.70969 3.17,12 2,12 z ",
"M 5.82828,12 Q 4.35734,12 3.78867,11.3818 3.22,10.7636 3.22,8.87484 L 3.22,2.2 4.39,2.2 4.39,8.6625 Q 4.39,10.1416 4.77609,10.5208 5.16219,10.9 6.34312,10.9 L 6.82,10.9 6.82,12 z ",
"M 1.52,5.23 L 2.61,5.23 2.61,5.7 Q 2.86672,5.425 3.1725,5.2875 3.47828,5.15 3.83312,5.15 Q 4.18797,5.15 4.47867,5.34398 4.76938,5.53797 4.98828,5.92609 Q 5.29078,5.53797 5.64258,5.34398 5.99437,5.15 6.41797,5.15 Q 7.13656,5.15 7.48828,5.73039 7.84,6.31078 7.84,7.49437 L 7.84,12 6.69,12 6.69,7.19844 Q 6.69,6.70547 6.55102,6.46273 6.41203,6.22 6.11906,6.22 Q 5.68328,6.22 5.47664,6.69789 5.27,7.17578 5.27,8.19219 L 5.27,12 4.12,12 4.12,7.15297 Q 4.12,6.64484 3.98852,6.43242 3.85703,6.22 3.54906,6.22 Q 3.09078,6.22 2.88039,6.68273 2.67,7.14547 2.67,8.19219 L 2.67,12 1.52,12 z ",
"M 1.69,5.23 L 2.84,5.23 2.84,6.17484 Q 3.32531,5.65859 3.87508,5.4043 4.42484,5.15 5.03141,5.15 Q 6.43438,5.15 7.03719,5.94281 7.64,6.73562 7.64,8.73844 L 7.64,12 6.49,12 6.49,8.66266 Q 6.49,7.23672 6.17125,6.71336 5.8525,6.19 5.07859,6.19 Q 4.47156,6.19 3.99344,6.44789 3.51531,6.70578 3.21188,7.19875 Q 3.00688,7.525 2.92344,7.95352 2.84,8.38203 2.84,9.315 L 2.84,9.51219 2.84,12 1.69,12 z ",
"M 4.67125,11.04 Q 5.57859,11.04 6.1193,10.3834 6.66,9.72687 6.66,8.61875 Q 6.66,7.50312 6.11555,6.84656 5.57109,6.19 4.67125,6.19 Q 3.77141,6.19 3.2307,6.84656 2.69,7.50312 2.69,8.61875 Q 2.69,9.72687 3.2307,10.3834 3.77141,11.04 4.67125,11.04 z M 7.87,8.62141 Q 7.87,10.1989 6.9907,11.1545 6.11141,12.11 4.67125,12.11 Q 3.23859,12.11 2.3593,11.1545 1.48,10.1989 1.48,8.62141 Q 1.48,7.04391 2.36305,6.07695 3.24609,5.11 4.67125,5.11 Q 6.11141,5.11 6.9907,6.07313 7.87,7.03625 7.87,8.62141 z ",
"M 4.87297,10.98 Q 5.76609,10.98 6.25805,10.343 6.75,9.70594 6.75,8.55328 Q 6.75,7.48406 6.23914,6.84703 5.72828,6.21 4.87297,6.21 Q 3.96469,6.21 3.42734,6.85078 2.89,7.49156 2.89,8.58359 Q 2.89,9.69078 3.42359,10.3354 3.95719,10.98 4.87297,10.98 z M 1.75,5.23 L 2.89,5.23 2.89,6.05813 Q 3.34453,5.59531 3.88984,5.36766 4.43516,5.14 5.06391,5.14 Q 6.40453,5.14 7.19227,6.06852 7.98,6.99703 7.98,8.59625 Q 7.98,10.2106 7.20359,11.1353 6.42719,12.06 5.09422,12.06 Q 4.35938,12.06 3.82539,11.8409 3.29141,11.6219 2.89,11.1461 L 2.89,14.21 1.75,14.21 z ",
"M 4.47187,6.21 Q 3.61437,6.21 3.10219,6.84703 2.59,7.48406 2.59,8.55328 Q 2.59,9.70594 3.0832,10.343 3.57641,10.98 4.47187,10.98 Q 5.39,10.98 5.925,10.3354 6.46,9.69078 6.46,8.58359 Q 6.46,7.49156 5.91742,6.85078 5.37484,6.21 4.47187,6.21 z M 6.46,6.05813 L 6.46,5.23 7.59,5.23 7.59,14.21 6.46,14.21 6.46,11.1461 Q 6.04297,11.6219 5.51227,11.8409 4.98156,12.06 4.25375,12.06 Q 2.90422,12.06 2.12711,11.1353 1.35,10.2106 1.35,8.59625 Q 1.35,6.99703 2.14227,6.06852 2.93453,5.14 4.28406,5.14 Q 4.90578,5.14 5.44789,5.36766 5.99,5.59531 6.46,6.05813 z ",
"M 2.4,5.23 L 3.55,5.23 3.55,6.02375 Q 3.92141,5.57813 4.3875,5.35906 4.85359,5.14 5.41453,5.14 Q 6.33922,5.14 6.85461,5.68516 7.37,6.23031 7.37,7.21453 L 7.37,7.26 6.2,7.26 6.2,7.16891 Q 6.2,6.70594 5.98039,6.44797 5.76078,6.19 5.36719,6.19 Q 4.54188,6.19 4.04594,6.93719 3.55,7.68438 3.55,8.97391 L 3.55,12 2.4,12 z ",
"M 3.06,10.28 Q 3.14344,10.66 3.5075,10.85 3.87156,11.04 4.53906,11.04 Q 5.37328,11.04 5.78664,10.808 6.2,10.5761 6.2,10.1044 Q 6.2,9.80016 5.99797,9.62906 5.79594,9.45797 5.15547,9.28297 L 4.10422,8.98609 Q 3.07422,8.69797 2.59711,8.23555 2.12,7.77313 2.12,7.06062 Q 2.12,6.07516 2.81273,5.59758 3.50547,5.12 4.92141,5.12 Q 6.01922,5.12 6.58703,5.60313 7.15484,6.08625 7.17,7.03 L 6.01,7.0375 Q 5.97219,6.55469 5.68484,6.36234 5.3975,6.17 4.67141,6.17 Q 3.97578,6.17 3.62789,6.37844 3.28,6.58688 3.28,7.01125 Q 3.28,7.34469 3.52953,7.54172 3.77906,7.73875 4.56562,7.93578 L 5.57141,8.20219 Q 6.46797,8.43031 6.93898,8.90164 7.41,9.37297 7.41,10.0269 Q 7.41,11 6.67484,11.555 5.93969,12.11 4.64359,12.11 Q 3.3325,12.11 2.67687,11.6734 2.02125,11.2367 1.9,10.28 z ",
"M 3.56,9.39266 L 3.56,6.36 2.16,6.36 2.16,5.27 3.65,5.27 3.65,3.56578 4.82,3.24 4.82,5.27 7.18,5.27 7.18,6.36 4.73,6.36 4.73,9.40797 Q 4.73,10.2614 4.97273,10.6157 5.21547,10.97 5.78437,10.97 Q 6.065,10.97 6.4025,10.8588 6.74,10.7477 7.18,10.51 L 7.18,11.6648 Q 6.755,11.8613 6.33,11.9556 5.905,12.05 5.45734,12.05 Q 4.91094,12.05 4.49727,11.8374 4.08359,11.6248 3.84078,11.2302 Q 3.68906,10.9797 3.62453,10.6684 3.56,10.3572 3.56,9.73469 z ",
"M 7.66,12 L 6.51,12 6.51,11.0552 Q 6.00953,11.5866 5.45594,11.8333 4.90234,12.08 4.2275,12.08 Q 3.545,12.08 3.01422,11.8143 2.48344,11.5486 2.165,11.0552 Q 1.92234,10.6759 1.81617,10.183 1.71,9.69 1.71,8.49156 L 1.71,5.23 2.86,5.23 2.86,8.55219 Q 2.86,10.0009 3.19391,10.5205 3.52781,11.04 4.33219,11.04 Q 4.89375,11.04 5.3718,10.7745 5.84984,10.5091 6.13812,10.0313 Q 6.33547,9.705 6.42273,9.27648 6.51,8.84797 6.51,7.915 L 6.51,7.71781 6.51,5.23 7.66,5.23 z ",
"M 1.32,5.23 L 2.57766,5.23 4.63844,11.0372 4.75219,11.0372 6.81281,5.23 8.01,5.23 5.54,12 3.79,12 z ",
"M 1.46,5.23 L 2.67,5.23 3.15391,9.32922 Q 3.15391,9.35203 3.16906,9.42781 Q 3.25969,10.0956 3.25969,10.695 L 4.01578,7.88 5.36922,7.88 6.14047,10.695 Q 6.17828,10.3231 6.21234,9.92102 6.24641,9.51891 6.24641,9.48094 L 6.7,5.23 7.91,5.23 7.05,12 5.50531,12 4.66609,9.00297 3.86469,12 2.32,12 z ",
"M 3.92656,8.59625 L 1.6,5.2 3.03984,5.2 4.66922,7.67141 6.28344,5.2 7.64,5.2 5.40437,8.50531 7.87,12 6.39859,12 4.62375,9.43766 2.85875,12 1.48,12 z ",
"M 1.21,5.23 L 2.57219,5.23 4.84078,9.2025 6.97297,5.23 8.24,5.23 4.01375,13.0138 Q 3.59641,13.7783 3.27398,14.0091 2.95156,14.24 2.35219,14.24 L 1.73,14.24 1.73,13.12 2.30672,13.12 Q 2.47359,13.12 2.59875,13.0514 2.72391,12.9828 2.80734,12.8458 L 4.20344,10.3122 z ",
"M 2,10.677 L 5.85203,6.41 2.27,6.41 2.27,5.3 7.2,5.3 7.2,6.60359 3.42109,10.81 7.36,10.81 7.36,11.92 2,11.92 z ",
"M 1.65,6.53 L 2.22563,6.53 Q 3.01344,6.53 3.31641,6.28969 3.61937,6.04938 3.61937,5.46953 Q 3.61937,5.45437 3.63078,5.28273 3.64219,5.11109 3.64969,4.95844 L 3.68,4.50063 Q 3.77078,3.20219 4.44008,2.65859 5.10938,2.115 6.69016,2.115 Q 6.70531,2.115 6.87547,2.1075 7.04563,2.1 7.19688,2.1 L 7.68,2.1 7.68,3.28 7.19688,3.28 Q 5.72484,3.28 5.37758,3.56992 5.03031,3.85984 4.97,4.75234 L 4.90922,5.51531 Q 4.86375,6.215 4.64367,6.59523 4.42359,6.97547 3.99109,7.12 Q 4.42359,7.26391 4.64367,7.64273 4.86375,8.02156 4.90922,8.71844 L 4.97,9.47672 Q 5.03031,10.3562 5.37758,10.6481 5.72484,10.94 7.19688,10.94 L 7.68,10.94 7.68,12.1352 7.19688,12.1352 Q 7.15906,12.1352 6.96242,12.1276 6.76578,12.12 6.59187,12.12 Q 5.09438,12.12 4.42875,11.5692 3.76313,11.0184 3.68,9.72687 L 3.64969,9.27953 Q 3.64969,9.24156 3.64969,9.18859 Q 3.56641,7.71 2.22563,7.71 L 1.65,7.71 z ",
"M 4.03,0.49 L 5.32,0.49 5.32,16.13 4.03,16.13 z ",
"M 7.11922,7.71 Q 5.77844,7.71 5.70266,9.15953 Q 5.69516,9.24344 5.69516,9.28922 L 5.68,9.73172 Q 5.58922,11.0495 4.91609,11.5873 4.24297,12.125 2.56391,12.125 Q 2.51859,12.125 2.37867,12.1325 2.23875,12.14 2.14797,12.14 L 1.68,12.14 1.68,10.96 2.59344,10.96 Q 3.62766,10.96 3.97867,10.6625 4.32969,10.365 4.39,9.48766 L 4.43547,8.72469 Q 4.48094,8.03266 4.70484,7.64859 4.92875,7.26453 5.36891,7.12 Q 4.92875,6.97547 4.70484,6.59141 4.48094,6.20734 4.43547,5.51531 L 4.39,4.75234 Q 4.32969,3.85984 3.98242,3.56992 3.63516,3.28 2.16313,3.28 L 1.68,3.28 1.68,2.1 2.14797,2.1 Q 2.24625,2.1 2.44289,2.1075 2.63953,2.115 2.74547,2.115 Q 4.25812,2.115 4.9275,2.66992 5.59687,3.22484 5.68,4.50063 L 5.69516,4.95078 Q 5.69516,4.99656 5.70266,5.09578 Q 5.79359,6.53 7.11922,6.53 L 7.71,6.53 7.71,7.71 z ",
"M 4.58516,3.72172 L 4.24359,3.47641 Q 4.12969,3.39203 3.9893,3.34602 3.84891,3.3 3.71234,3.3 Q 3.49219,3.3 3.37078,3.48016 3.24938,3.66031 3.24938,3.99 L 2.02,3.99 2.02,3.95937 Q 2.02,3.13844 2.46016,2.62922 2.90031,2.12 3.59094,2.12 Q 3.91734,2.12 4.1943,2.21523 4.47125,2.31047 4.77484,2.53156 L 5.11641,2.775 Q 5.23031,2.86625 5.36313,2.90813 5.49594,2.95 5.64,2.95 Q 5.86781,2.95 5.98922,2.775 6.11062,2.6 6.12578,2.25 L 7.34,2.25 7.34,2.28047 Q 7.34,3.09906 6.89984,3.61453 6.45969,4.13 5.76906,4.13 Q 5.43516,4.13 5.16195,4.03547 4.88875,3.94094 4.58516,3.72172 z ",
  ]

import itertools
import sys
from lxml import etree


(LEFT,RIGHT,CENTER,JUSTIFIED)=range(4)
(WHITE_BAR, BLACK_BAR, TALL_BAR) = range(3)
TEXT_TEMPLATE = 'font-size:%dpx;text-align:center;text-anchor:middle;'

class Barcode(object):
    """Provide a base class for all barcode renderers"""
    name = None

    def error(self, bar, msg):
        """Cause an error to be reported"""
        sys.stderr.write(
            "Error encoding '%s' as %s barcode: %s\n" % (bar, self.name, msg))
        return "ERROR"

    def __init__(self, param={}):
        self.document = param.get('document', None)
        self.x        = float(param.get('x', 0))
        self.y        = float(param.get('y', 0))
        self.scale    = param.get('scale', 1)
        self.height   = param.get('height', 30)
        self.label    = param.get('text', None)
        self.addon    =param.get('addon','')
        self.quietmark=param.get('quietmark',False)
        self.rightmark= self.quietmark and len(self.addon)==0
        self.string   = self.encode( self.label )

        if not self.string:
            return 

        self.width  = len(self.string)
        self.data   = self.graphicalArray(self.string)

    def get_id(self):
        """Get the next useful id"""
        if not self.document:
            return "barcode"
        doc_ids = {}
        docIdNodes = self.document.xpath('//@id')
        for m in docIdNodes:
            doc_ids[m] = 1

        name  = 'barcode'

        index = 0
        while (doc_ids.has_key(name)):
            index += 1
            name = 'barcode%d' % index
        return name

    def generate(self):
        """Generate the actual svg from the coding"""
        svg_uri = u'http://www.w3.org/2000/svg'
        if self.string == 'ERROR':
            return None,0,0
        if not self.string or not self.data:
            raise ValueError("No string specified for barcode.")

        data = self.data
        name = self.get_id()

        # use an svg group element to contain the barcode
        barcode = etree.Element('{%s}%s' % (svg_uri,'g'))
        barcode.set('id', name)
        barcode.set('style', 'fill: black;')
        barcode.set('transform', 'translate(%d,%d) scale(%f)' % (self.x, self.y, self.scale))

        bar_offset = 0
        bar_id     = 1

        cw=0 
        fb=-1
        lb=-1
        for datum in data:
            if (int(datum[0])==2):
              cw+=1
            # Datum 0 tells us what style of bar is to come next
            style = self.getStyle(int(datum[0]))
            # Datum 1 tells us what width in units,
            # style tells us how wide a unit is
            width = int(datum[1]) * float(style['width'])

            if style['write']:
                if fb<0:
                  fb=bar_offset
                rect = etree.SubElement(barcode,'{%s}%s' % (svg_uri,'rect'))
                rect.set('x',      str(bar_offset))
                rect.set('y',      str(style['top']))
                rect.set('width',  str(width))
                rect.set('height', str(style['height']))
                rect.set('id',     "%s_bar%d" % (name, bar_id))
                lb=bar_offset+width
            bar_offset += width
            bar_id += 1

        barwidth = bar_offset
        # Add text at the bottom of the barcode
        '''text = etree.SubElement(barcode,'{%s}%s' % (svg_uri,'text'))
        text.set( 'x', str(float(bar_width / 2.0)))
        text.set( 'y', str(self.height + self.fontSize() ))
        text.set( 'style', TEXT_TEMPLATE % self.fontSize() )
        text.set( '{http://www.w3.org/XML/1998/namespace}space', 'preserve' )
        text.set( 'id', '%s_text' % name )
        text.text = str(self.label)
        '''
        tgroup=etree.SubElement(barcode,'g')
        tgroup.set( 'id', name + '_bottomtext' )
        alg=self.align()
        sx= float(self.fontSize())/9.0*6.0
        #sys.stderr.write(self.label)
        xi=-0.5
        for i in range(len(self.label)):
          c=self.label[i]
          if c>='!' and c<='~':
            tpath=etree.SubElement(tgroup,'path')
            tpath.set('style','fill:black;stroke=none')
            if alg==LEFT:
              tpath.set('transform','translate(%f,%f) scale(%f)'%(xi,self.labelOffset()+float(self.height) ,self.fontSize()/12.0))
            elif alg==RIGHT:
              tpath.set('transform','translate(%f,%f) scale(%f)'%(xi+float(barwidth)-sx*len(self.label)+sx*(i),self.labelOffset()+float(self.height) ,self.fontSize()/12.0))
            elif alg==CENTER:
              tpath.set('transform','translate(%f,%f) scale(%f)'%(xi+float((lb+fb)/ 2.0)-sx*(len(self.label))/2.0 + sx*(i),self.labelOffset()+float(self.height) ,self.fontSize()/12.0))
            elif alg==JUSTIFIED:
              dt=0.7
              if i==0:
                if self.quietmark and c=='<':
                  tpath.set('transform','translate(%f,%f) scale(%f)'%(xi,self.labelOffset()+float(self.height)+12*(1-dt) ,self.fontSize()/12.0*6.0/10.0))
                else:
                  tpath.set('transform','translate(%f,%f) scale(%f)'%(xi,self.labelOffset()+float(self.height) ,self.fontSize()/12.0))
              elif i==len(self.label)-1:
                if self.quietmark and c=='>':
                  tpath.set('transform','translate(%f,%f) scale(%f)'%(xi+barwidth-sx*dt,self.labelOffset()+float(self.height)+12*(1-dt) ,self.fontSize()/12.0*dt))
                else:
                  tpath.set('transform','translate(%f,%f) scale(%f)'%(xi+barwidth-sx,self.labelOffset()+float(self.height) ,self.fontSize()/12.0))
              else:
                tl=(len(self.label)-2)*sx
                tpath.set('transform','translate(%f,%f) scale(%f)'%(xi+(lb+fb)/2.0-tl/2.0+sx*(i-1)-(cw%2)*1,self.labelOffset()+float(self.height) ,self.fontSize()/12.0))
            tpath.set('d',ocrfont[ord(c)-33])
 

        return barcode,(barwidth)*self.scale,self.labelOffset()+float(self.height)

    def graphicalArray(self, code):
        """Converts black and white markets into a space array"""
        return [(x,len(list(y))) for x, y in itertools.groupby(code)]

    def align(self):
        return CENTER
    
    def labelOffset(self):
        return 0
        
    def getStyle(self, index):
        """Returns the styles that should be applied to each bar"""
        result = { 'width' : 1, 'top' : 0, 'write' : True }
        if index == BLACK_BAR:
            result['height'] = self.height
        if index == TALL_BAR:
            result['height'] = self.height + 5
        if index == WHITE_BAR:
            result['write'] = False
        return result

    def fontSize(self):
        """Return the ideal font size, defaults to 9px"""
        return 10
